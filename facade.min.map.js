{"version":3,"file":"facade.min.js","sources":["facade.js"],"names":["isArray","obj","Object","prototype","toString","call","isFunction","Facade","canvas","width","height","this","nodeType","document","createElement","setAttribute","parseInt","context","getContext","e","Error","dt","fps","ftime","_callback","_requestAnimation","_requestAnimationFrame","_cancelAnimationFrame","_TO_RADIANS","Math","PI","forEach","key","window","requestAnimationFrame","cancelAnimationFrame","addToStage","Entity","draw","clear","clearRect","callback","start","exportBase64","type","quality","toDataURL","renderWithContext","options","save","hasOwnProperty","apply","restore","_animate","bind","stop","time","toFixed","undefined","_defaultOptions","updated","x","y","_defaultMetrics","metrics","getOption","_options","getAllOptions","setOption","value","test","String","setOptions","getMetric","_metrics","getAllMetrics","facade","_configOptions","_draw","Polygon","create","constructor","opacity","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","points","fillStyle","strokeStyle","lineWidth","lineCap","lineJoin","closePath","point","length","beginPath","bezierCurveTo","arc","lineTo","moveTo","fill","stroke","translate","globalAlpha","_setMetrics","bounds","top","right","bottom","left","Circle","radius","begin","end","Line","x1","y1","x2","y2","Rect","Group","objects","addToGroup","push","obj_metrics","define"],"mappings":";;;;;;;;CAQC,WAEG,YA2BA,SAASA,GAAQC,GAEb,MAA+C,mBAAxCC,OAAOC,UAAUC,SAASC,KAAKJ,IAA4B,GAAO,EAc7E,QAASK,GAAWL,GAEhB,MAA+C,sBAAxCC,OAAOC,UAAUC,SAASC,KAAKJ,IAA+B,GAAO,EAsBhF,QAASM,GAAOC,EAAQC,EAAOC,GAE3B,KAAMC,eAAgBJ,IAElB,MAAO,IAAIA,GAAOC,EAAQC,EAAOC,EAIjCF,IAA4B,gBAAXA,IAA2C,IAApBA,EAAOI,SAE/CD,KAAKH,OAASA,GAIdG,KAAKH,OAASK,SAASC,cAAc,UAEf,gBAAXN,IAEPG,KAAKH,OAAOO,aAAa,KAAMP,IAMnCC,GAASC,IAETC,KAAKH,OAAOO,aAAa,QAASC,SAASP,EAAO,KAClDE,KAAKH,OAAOO,aAAa,SAAUC,SAASN,EAAQ,KAIxD,KAEIC,KAAKM,QAAUN,KAAKH,OAAOU,WAAW,MAExC,MAAOC,GAEL,KAAM,IAAIC,OAAM,8DAIpBT,KAAKU,GAAK,KACVV,KAAKW,IAAM,KACXX,KAAKY,MAAQ,KAEbZ,KAAKa,UAAY,KAEjBb,KAAKc,kBAAoB,KAhH7B,GAAIC,GACAC,EAEAC,GADWf,SAASC,cAAc,UAAUI,WAAW,MACzCW,KAAKC,GAAK,MAM1B,SAAU,OAAQC,QAAQ,SAAUC,GAClCN,EAAyBA,GAA0BO,OAAOC,uBAAyBD,OAAOD,EAAM,0BAA4B,KAC5HL,EAAwBA,GAAyBM,OAAOE,sBAAwBF,OAAOD,EAAM,yBAA2B,OAmH5HzB,EAAOJ,UAAUiC,WAAa,SAAUnC,GAEpC,KAAMA,YAAeM,GAAO8B,QAExB,KAAM,IAAIjB,OAAM,+EAMpB,OAFAnB,GAAIqC,KAAK3B,MAEFA,MAaXJ,EAAOJ,UAAUoC,MAAQ,WAIrB,MAFA5B,MAAKM,QAAQuB,UAAU,EAAG,EAAG7B,KAAKH,OAAOC,MAAOE,KAAKH,OAAOE,QAErDC,MAoBXJ,EAAOJ,UAAUmC,KAAO,SAAUG,GAE9B,GAAwB,kBAAbA,GAQP,KAAM,IAAIrB,OAAM,0DAIpB,OAVIT,MAAKa,UAAYiB,EAEjB9B,KAAK+B,QAQF/B,MAeXJ,EAAOJ,UAAUwC,aAAe,SAAUC,EAAMC,GAkB5C,MAhBKD,KAEDA,EAAO,aAIY,gBAAZC,GAEPA,GAAoB,IAIpBA,EAAU,EAIPlC,KAAKH,OAAOsC,UAAUF,EAAMC,IAevCtC,EAAOJ,UAAUO,OAAS,SAAUA,GAQhC,MANIA,IAEAC,KAAKH,OAAOO,aAAa,SAAUC,SAASN,EAAQ,KAIjDC,KAAKH,OAAOE,QAIvBH,EAAOJ,UAAU4C,kBAAoB,SAAUC,EAASP,GAEpD,GAAIT,EAEJrB,MAAKM,QAAQgC,MAEb,KAAKjB,IAAOgB,GAEJA,EAAQE,eAAelB,KAEnBhC,EAAQgD,EAAQhB,KAAS1B,EAAWK,KAAKM,QAAQe,IAEjDrB,KAAKM,QAAQe,GAAKmB,MAAMxC,KAAKM,QAAS+B,EAAQhB,IAEvCrB,KAAKM,QAAQiC,eAAelB,KAEnCrB,KAAKM,QAAQe,GAAOgB,EAAQhB,IAQpCS,IAEAA,EAASpC,KAAK,KAAMM,MAIxBA,KAAKM,QAAQmC,WAajB7C,EAAOJ,UAAUuC,MAAQ,WAIrB,MAFA/B,MAAKc,kBAAoBC,EAAuBf,KAAK0C,SAASC,KAAK3C,OAE5DA,MAaXJ,EAAOJ,UAAUoD,KAAO,WAUpB,MARA5C,MAAKU,GAAK,KACVV,KAAKW,IAAM,KACXX,KAAKY,MAAQ,KAEbI,EAAsBhB,KAAKc,mBAE3Bd,KAAKc,kBAAoB,KAElBd,MAeXJ,EAAOJ,UAAUM,MAAQ,SAAUA,GAQ/B,MANIA,IAEAE,KAAKH,OAAOO,aAAa,QAASC,SAASP,EAAO,KAI/CE,KAAKH,OAAOC,OAcvBF,EAAOJ,UAAUkD,SAAW,SAAUG,GA4BlC,MA1B8B,kBAAnB7C,MAAKa,WAERb,KAAKY,QAELZ,KAAKU,GAAKmC,EAAO7C,KAAKY,MAEtBZ,KAAKW,KAAO,IAAOX,KAAKU,IAAIoC,QAAQ,IAIxC9C,KAAKc,kBAAoBC,EAAuBf,KAAK0C,SAASC,KAAK3C,OAEnEA,KAAKY,MAAQiC,EAEb7C,KAAKM,QAAQgC,OAEbtC,KAAKa,YAELb,KAAKM,QAAQmC,WAIbzC,KAAK4C,OAIF5C,MAUXJ,EAAO8B,OAAS,WAAc,MAAOqB,SAYrCnD,EAAO8B,OAAOlC,UAAUwD,gBAAkB,SAAUC,GAEhD,GAAIZ,GACAhB,CAEJgB,IACIa,EAAG,EACHC,EAAG,EAGP,KAAK9B,IAAO4B,GAEJA,EAAQV,eAAelB,KAEvBgB,EAAQhB,GAAO4B,EAAQ5B,GAM/B,OAAOgB,IAcXzC,EAAO8B,OAAOlC,UAAU4D,gBAAkB,SAAUH,GAEhD,GACI5B,GADAgC,GAAYH,EAAG,KAAMC,EAAG,KAAMrD,MAAO,KAAMC,OAAQ,KAGvD,KAAKsB,IAAO4B,GAEJA,EAAQV,eAAelB,KAEvBgC,EAAQhC,GAAO4B,EAAQ5B,GAM/B,OAAOgC,IAcXzD,EAAO8B,OAAOlC,UAAU8D,UAAY,SAAUjC,GAE1C,MAAIrB,MAAKuD,SAAShB,eAAelB,GAEtBrB,KAAKuD,SAASlC,GAIlB0B,QAaXnD,EAAO8B,OAAOlC,UAAUgE,cAAgB,WAEpC,GACInC,GADAgB,IAGJ,KAAKhB,IAAOrB,MAAKuD,SAETvD,KAAKuD,SAAShB,eAAelB,KAE7BgB,EAAQhB,GAAOrB,KAAKuD,SAASlC,GAMrC,OAAOgB,IAgBXzC,EAAO8B,OAAOlC,UAAUiE,UAAY,SAAUpC,EAAKqC,EAAOC,GAEtD,GAAItB,GAAUrC,KAAKwD,eAEnB,IAAInB,EAAQE,eAAelB,GAAM,CAE7B,GAAIuC,aAAcvB,GAAQhB,MAAUuC,aAAcF,IAU9C,KAAM,IAAIjD,OAAM,iBAAmBY,EAAM,KAAOqC,EAAQ,iBAAoBA,GAAQ,gBAAmB1D,MAAKuD,SAASlC,GAIzH,OAZQsC,MAAS,IAET3D,KAAKuD,SAASlC,GAAOqC,GAUtBA,EAIX,MAAOX,SAeXnD,EAAO8B,OAAOlC,UAAUqE,WAAa,SAAUZ,EAASU,GAEpD,GACItC,GADAgB,EAAUrC,KAAKwD,eAGnB,KAAKnC,IAAO4B,GAEJA,EAAQV,eAAelB,IAAQgB,EAAQE,eAAelB,KAEtDgB,EAAQhB,GAAOrB,KAAKyD,UAAUpC,EAAK4B,EAAQ5B,GAAMsC,GAMzD,OAAOtB,IAcXzC,EAAO8B,OAAOlC,UAAUsE,UAAY,SAAUzC,GAE1C,MAAIrB,MAAK+D,SAASxB,eAAelB,GAEtBrB,KAAK+D,SAAS1C,GAIlB0B,QAaXnD,EAAO8B,OAAOlC,UAAUwE,cAAgB,WAEpC,GACI3C,GADAgC,IAGJ,KAAKhC,IAAOrB,MAAK+D,SAET/D,KAAK+D,SAASxB,eAAelB,KAE7BgC,EAAQhC,GAAOrB,KAAK+D,SAAS1C,GAMrC,OAAOgC,IAIXzD,EAAO8B,OAAOlC,UAAUmC,KAAO,SAAUsC,GAErC,GAAI5B,GAAUrC,KAAKwD,eAEf7D,GAAWK,KAAKkE,kBAEhB7B,EAAUrC,KAAKkE,eAAe7B,IAI9B1C,EAAWK,KAAKmE,QAEhBF,EAAO7B,kBAAkBC,EAASrC,KAAKmE,MAAMxB,KAAK3C,KAAMiE,KAUhErE,EAAOwE,QAAU,SAAU/B,GAEvB,MAAMrC,gBAAgBJ,GAAOwE,SAM7BpE,KAAKuD,SAAWvD,KAAKgD,kBACrBhD,KAAK+D,SAAW/D,KAAKoD,kBAErBpD,KAAK6D,WAAWxB,GAHhBrC,QAJW,GAAIJ,GAAOwE,QAAQ/B,IAelCzC,EAAOwE,QAAQ5E,UAAYD,OAAO8E,OAAOzE,EAAO8B,OAAOlC,WACvDI,EAAOwE,QAAQE,YAAc1E,EAAO8B,OAEpC9B,EAAOwE,QAAQ5E,UAAUwD,gBAAkB,SAAUC,GAEjD,GAAIZ,GACAhB,CAEJgB,GAAUzC,EAAO8B,OAAOlC,UAAUwD,iBAC9BuB,QAAS,IACTC,WAAY,EACZC,YAAa,OACbC,cAAe,EACfC,cAAe,EACfC,UACAC,UAAW,GACXC,YAAa,GACbC,UAAW,EACXC,QAAS,UACTC,SAAU,QACVC,WAAW,GAGf,KAAK7D,IAAO4B,GAEJA,EAAQV,eAAelB,KAEvBgB,EAAQhB,GAAO4B,EAAQ5B,GAM/B,OAAOgB,IAIXzC,EAAOwE,QAAQ5E,UAAU2E,MAAQ,SAAUF,GAEvC,GAEIkB,GAFA7E,EAAU2D,EAAO3D,QACjB+B,EAAUrC,KAAKwD,eASnB,IANI7D,EAAWK,KAAKkE,kBAEhB7B,EAAUrC,KAAKkE,eAAe7B,IAI9BA,EAAQuC,OAAOQ,OAAQ,CAEvB9E,EAAQ+E,WAER,KAAKF,IAAS9C,GAAQuC,OAEdvC,EAAQuC,OAAOrC,eAAe4C,KAEO,IAAjC9C,EAAQuC,OAAOO,GAAOC,OAEtB9E,EAAQgF,cAAc9C,MAAMlC,EAAS+B,EAAQuC,OAAOO,IAEZ,IAAjC9C,EAAQuC,OAAOO,GAAOC,OAE7B9E,EAAQiF,IAAI/C,MAAMlC,EAAS+B,EAAQuC,OAAOO,IAI1C7E,EAAQkF,OAAOhD,MAAMlC,EAAS+B,EAAQuC,OAAOO,IAQrD9C,GAAQ6C,UAER5E,EAAQ4E,YAIR5E,EAAQmF,OAAOjD,MAAMlC,EAAS+B,EAAQuC,OAAOO,IAI7C9C,EAAQwC,WACRvE,EAAQoF,OAGRrD,EAAQ0C,UAAY,GACpBzE,EAAQqF,WAOpB/F,EAAOwE,QAAQ5E,UAAU0E,eAAiB,SAAU7B,GAKhD,MAHAA,GAAQuD,WAAcvD,EAAQa,EAAGb,EAAQc,GACzCd,EAAQwD,YAAcxD,EAAQkC,QAAU,IAEjClC,GAIXzC,EAAOwE,QAAQ5E,UAAUsG,YAAc,WAEnC,GAGIX,GAHA9B,EAAUrD,KAAKgE,gBACf3B,EAAUrC,KAAKwD,gBACfuC,GAAWC,IAAK,KAAMC,MAAO,KAAMC,OAAQ,KAAMC,KAAM,KAGvDxG,GAAWK,KAAKkE,kBAEhB7B,EAAUrC,KAAKkE,eAAe7B,GAIlC,KAAK8C,IAAS9C,GAAQuC,OAEdvC,EAAQuC,OAAOrC,eAAe4C,KAEO,IAAjC9C,EAAQuC,OAAOO,GAAOC,OAEtBD,GAAUjC,EAAGb,EAAQuC,OAAOO,GAAO,GAAIhC,EAAGd,EAAQuC,OAAOO,GAAO,IAExB,IAAjC9C,EAAQuC,OAAOO,GAAOC,SAE7B/B,EAAQvD,MAAmC,EAA3BuC,EAAQuC,OAAOO,GAAO,GACtC9B,EAAQtD,OAAoC,EAA3BsC,EAAQuC,OAAOO,GAAO,GAEvCA,GACIjC,EAAGb,EAAQuC,OAAOO,GAAO,GAAK9C,EAAQuC,OAAOO,GAAO,GACpDhC,EAAGd,EAAQuC,OAAOO,GAAO,GAAK9C,EAAQuC,OAAOO,GAAO,MAKxDA,EAAMjC,EAAI6C,EAAOI,MAAwB,OAAhBJ,EAAOI,QAEhCJ,EAAOI,KAAOhB,EAAMjC,IAIpBiC,EAAMhC,EAAI4C,EAAOC,KAAsB,OAAfD,EAAOC,OAE/BD,EAAOC,IAAMb,EAAMhC,IAInBgC,EAAMjC,EAAI6C,EAAOE,OAA0B,OAAjBF,EAAOE,SAEjCF,EAAOE,MAAQd,EAAMjC,IAIrBiC,EAAMhC,EAAI4C,EAAOG,QAA4B,OAAlBH,EAAOG,UAElCH,EAAOG,OAASf,EAAMhC,GA4BlC,OApBAE,GAAQH,EAAIb,EAAQa,EAAI6C,EAAOI,KAC/B9C,EAAQF,EAAId,EAAQc,EAAI4C,EAAOC,IAET,OAAlB3C,EAAQvD,OAAqC,OAAnBuD,EAAQtD,SAElCsD,EAAQvD,MAAQiG,EAAOE,MAAQF,EAAOI,KACtC9C,EAAQtD,OAASgG,EAAOG,OAASH,EAAOC,KAIxC3D,EAAQ0C,YAER1B,EAAQH,EAAIG,EAAQH,EAAIb,EAAQ0C,UAAY,EAC5C1B,EAAQF,EAAIE,EAAQF,EAAId,EAAQ0C,UAAY,EAE5C1B,EAAQvD,MAAQuD,EAAQvD,MAAQuC,EAAQ0C,UACxC1B,EAAQtD,OAASsD,EAAQtD,OAASsC,EAAQ0C,WAIvC1B,GAQXzD,EAAOwG,OAAS,SAAU/D,GAEtB,MAAMrC,gBAAgBJ,GAAOwG,QAM7BpG,KAAKuD,SAAWvD,KAAKgD,iBAAkBqD,OAAQ,EAAGC,MAAO,EAAGC,IAAK,MACjEvG,KAAK+D,SAAW/D,KAAKoD,kBAErBpD,KAAK6D,WAAWxB,GAHhBrC,QAJW,GAAIJ,GAAOwG,OAAO/D,IAejCzC,EAAOwG,OAAO5G,UAAYD,OAAO8E,OAAOzE,EAAOwE,QAAQ5E,WACvDI,EAAOwG,OAAO9B,YAAc1E,EAAOwE,QAEnCxE,EAAOwG,OAAO5G,UAAU0E,eAAiB,SAAU7B,GAO/C,MALAA,GAAQuD,WAAcvD,EAAQa,EAAGb,EAAQc,GACzCd,EAAQwD,YAAcxD,EAAQkC,QAAU,IAExClC,EAAQuC,SAAa,EAAG,EAAGvC,EAAQgE,OAAQhE,EAAQiE,MAAQrF,EAAaoB,EAAQkE,IAAMtF,IAE/EoB,GAQXzC,EAAO4G,KAAO,SAAUnE,GAEpB,MAAMrC,gBAAgBJ,GAAO4G,MAM7BxG,KAAKuD,SAAWvD,KAAKgD,iBAAkByD,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGC,GAAI,IAChE5G,KAAK+D,SAAW/D,KAAKoD,kBAErBpD,KAAK6D,WAAWxB,GAHhBrC,QAJW,GAAIJ,GAAO4G,KAAKnE,IAe/BzC,EAAO4G,KAAKhH,UAAYD,OAAO8E,OAAOzE,EAAOwE,QAAQ5E,WACrDI,EAAO4G,KAAKlC,YAAc1E,EAAOwE,QAEjCxE,EAAO4G,KAAKhH,UAAU0E,eAAiB,SAAU7B,GAO7C,MALAA,GAAQuD,WAAcvD,EAAQa,EAAGb,EAAQc,GACzCd,EAAQwD,YAAcxD,EAAQkC,QAAU,IAExClC,EAAQuC,SAAavC,EAAQoE,GAAIpE,EAAQqE,KAAQrE,EAAQsE,GAAItE,EAAQuE,KAE9DvE,GAQXzC,EAAOiH,KAAO,SAAUxE,GAEpB,MAAMrC,gBAAgBJ,GAAOiH,MAM7B7G,KAAKuD,SAAWvD,KAAKgD,iBAAkBlD,MAAO,EAAGC,OAAQ,IACzDC,KAAK+D,SAAW/D,KAAKoD,kBAErBpD,KAAK6D,WAAWxB,GAHhBrC,QAJW,GAAIJ,GAAOiH,KAAKxE,IAe/BzC,EAAOiH,KAAKrH,UAAYD,OAAO8E,OAAOzE,EAAOwE,QAAQ5E,WACrDI,EAAOiH,KAAKvC,YAAc1E,EAAOwE,QAEjCxE,EAAOiH,KAAKrH,UAAU0E,eAAiB,SAAU7B,GAO7C,MALAA,GAAQuD,WAAcvD,EAAQa,EAAGb,EAAQc,GACzCd,EAAQwD,YAAcxD,EAAQkC,QAAU,IAExClC,EAAQuC,SAAa,EAAG,IAAOvC,EAAQvC,MAAO,IAAOuC,EAAQvC,MAAOuC,EAAQtC,SAAY,EAAGsC,EAAQtC,SAE5FsC,GAQXzC,EAAOkH,MAAQ,SAAUzE,GAErB,MAAMrC,gBAAgBJ,GAAOkH,OAM7B9G,KAAKuD,SAAWvD,KAAKgD,kBACrBhD,KAAK+D,SAAW/D,KAAKoD,kBAErBpD,KAAK6D,WAAWxB,GAEhBrC,KAAK+G,WALL/G,QAJW,GAAIJ,GAAOkH,MAAMzE,IAiBhCzC,EAAOkH,MAAMtH,UAAYD,OAAO8E,OAAOzE,EAAO8B,OAAOlC,WACrDI,EAAOkH,MAAMxC,YAAc1E,EAAO8B,OAElC9B,EAAOkH,MAAMtH,UAAU2E,MAAQ,SAAUF,GAErC,GAAI5C,EAEJ,KAAKA,IAAOrB,MAAK+G,QAET/G,KAAK+G,QAAQxE,eAAelB,IAE5B4C,EAAOxC,WAAWzB,KAAK+G,QAAQ1F,KAQ3CzB,EAAOkH,MAAMtH,UAAU0E,eAAiB,SAAU7B,GAI9C,MAFAA,GAAQuD,WAAcvD,EAAQa,EAAGb,EAAQc,GAElCd,GAIXzC,EAAOkH,MAAMtH,UAAUwH,WAAa,SAAU1H,GAEtCA,YAAeM,GAAO8B,QAEtB1B,KAAK+G,QAAQE,KAAK3H,IAM1BM,EAAOkH,MAAMtH,UAAUsG,YAAc,WAEjC,GAEIzE,GACA6F,EAHA7D,EAAUrD,KAAKgE,gBACf3B,EAAUrC,KAAKwD,eAInB,KAAKnC,IAAOrB,MAAK+G,QAET/G,KAAK+G,QAAQxE,eAAelB,KAE5B6F,EAAclH,KAAK+G,QAAQ1F,GAAKyE,eAE5BoB,EAAYhE,EAAIG,EAAQH,GAAmB,OAAdG,EAAQH,KAErCG,EAAQH,EAAIgE,EAAYhE,IAIxBgE,EAAY/D,EAAIE,EAAQF,GAAmB,OAAdE,EAAQF,KAErCE,EAAQF,EAAI+D,EAAY/D,GAIN,OAAlBE,EAAQvD,MAERuD,EAAQvD,MAAQoH,EAAYpH,MAErBoH,EAAYhE,EAAIG,EAAQH,EAAIgE,EAAYpH,MAAQuD,EAAQvD,QAE/DuD,EAAQvD,MAAQoH,EAAYhE,EAAIG,EAAQH,EAAIgE,EAAYpH,OAIrC,OAAnBuD,EAAQtD,OAERsD,EAAQtD,OAASmH,EAAYnH,OAEtBmH,EAAY/D,EAAIE,EAAQF,EAAI+D,EAAYpH,MAAQuD,EAAQtD,SAE/DsD,EAAQtD,OAASmH,EAAY/D,EAAIE,EAAQF,EAAI+D,EAAYpH,OAWrE,OAHAuD,GAAQH,EAAIb,EAAQa,EAAIG,EAAQH,EAChCG,EAAQF,EAAId,EAAQc,EAAIE,EAAQF,EAEzBE,GAQkB,kBAAlB/B,QAAO6F,QAAyB7F,OAAO6F,OAAO5E,eAAe,OAEpEjB,OAAO6F,UAAW,WAAc,MAAOvH,KAIvC0B,OAAO1B,OAASA"}