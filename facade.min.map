{"version":3,"file":"facade.min.js","sources":["facade.js"],"names":["isArray","obj","Object","prototype","toString","call","isFunction","Facade","canvas","width","height","this","nodeType","document","createElement","setAttribute","parseInt","context","getContext","e","Error","dt","fps","ftime","_callback","_requestAnimation","_requestAnimationFrame","_cancelAnimationFrame","_contextProperties","_TO_RADIANS","Math","PI","forEach","key","window","requestAnimationFrame","cancelAnimationFrame","addToStage","Entity","draw","clear","clearRect","callback","start","exportBase64","type","quality","toDataURL","renderWithContext","options","save","hasOwnProperty","apply","indexOf","restore","_animate","bind","stop","time","toFixed","undefined","_defaultOptions","updated","x","y","_defaultMetrics","metrics","getOption","_options","getAllOptions","setOption","value","test","String","setOptions","getMetric","_metrics","getAllMetrics","facade","_configOptions","_draw","Polygon","create","constructor","opacity","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","points","fillStyle","strokeStyle","lineWidth","lineCap","lineJoin","closePath","point","length","beginPath","bezierCurveTo","arc","lineTo","moveTo","fill","stroke","translate","globalAlpha","_setMetrics","bounds","top","right","bottom","left","Circle","radius","begin","end","Line","x1","y1","x2","y2","Rect","Group","objects","addToGroup","push","removeFromGroup","slice","obj_metrics","define"],"mappings":"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"}